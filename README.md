# Pin

Pin 是一个轻量级的终端会话管理工具，类似于 screen 或 tmux，允许用户启动一个命令，随后可以分离（detach）和重新附加（attach）到该会话。

## 功能特点

- 创建可分离的终端会话
- 支持会话的分离与重新连接
- 保存会话历史，重新连接时可查看之前的输出，不需要特殊的上下翻页操作(最多保留1M的历史记录)
- 支持zmodem(sz rz)文件传输
- 自动处理终端窗口大小调整
- 轻量且易用，专注于核心功能

## 使用方法

### 基本用法

```bash
# 启动新会话（默认使用当前 shell）
pin

# 在新会话中运行特定命令
pin command [args...]

# 附加到现有会话
pin -a /tmp/pin-{uid}/{cmd}-{pid}.sock

# 创建分离的会话（后台运行）
pin --detach command [args...]

# 创建前台分离会话
pin -f command [args...]
```

### 选项说明

- `-a, --attach <socket>`: 连接到指定的会话套接字
- `-f, --foreground`: 在前台运行但仍处于分离状态
- `--detach`: 创建分离的会话（后台运行）

## 技术细节

- 会话套接字文件保存在 `/tmp/pin-{uid}/{cmd}-{pid}.sock` 目录下
  - `{uid}` 是用户 ID
  - `{cmd}` 是命令名
  - `{pid}` 是进程 ID
- 会话中的程序可通过 `PIN_SOCK` 环境变量获取当前会话的套接字路径
- 使用 `Ctrl+\` 组合键可从会话中分离

## 注意事项

- 无法在已有的 pin 会话内启动另一个 pin 会话
- 一个会话同一时间只能有一个客户端连接

## 对比其他工具

相比于 screen 和 tmux，Pin 更加轻量，专注于提供简单的会话管理功能，不支持复杂的窗口分割或会话布局，但对于简单的应用场景足够使用。
